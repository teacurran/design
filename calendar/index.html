<!DOCTYPE html>
<html lang="en">
<head>
  <title>Calendar</title>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js"></script>
</head>
<body style="height: 100vh;">
    <div id="drawing" style="height: 100%;"></div>

    <script>
      const getDayName = (date) => {
        const days = ['Su', 'M', 'Tu', 'W', 'Th', 'F', 'Sa'];
        return days[date.getDay()];
      };

      const getMonthName = (monthNumber) => {
        const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];
        return months[monthNumber];
      };

      const DEFAULT_CELL_BG = 'rgba(255, 255, 255, 0)';
      const WEEKEND_CELL_BG = 'rgba(255, 0, 0, 0.1)';
      const BORDER_COLOR = 'rgb(255, 0, 0)';

      const optHighlightWeekends = true;
      const optShowDayNames = true;
      const optShowWeekendDayNames = false;
      const optRainbowDays1 = false;
      const optRainbowDays2 = false;
      const optRainbowDays3 = true;

      const cellPadding = 5;
      const cellWidth = 50;
      const cellHeight = 75;
      const gridWidth = 32 * cellWidth;
      const gridHeight = 12 * cellHeight;
      const startDate = new Date(2024, 0, 1);

      const draw = SVG().addTo('#drawing').size('100%', '100%');


      draw.text(function(add) {
              add.tspan(2024).newLine();
            }).move(1400, 60).font({
              size: 80,
              family: 'Helvetica',
              weight: 'bold'
            });

      const totalColumns = 32;
      const totalRows = 12;
      const maxDistance = Math.sqrt(Math.pow(totalRows - 1, 2) + Math.pow(totalColumns - 1, 2));

      for (let row = 0; row < totalRows; row++) {
        for (let col = 0; col < totalColumns; col++) {
          const x = col * cellWidth;
          const y = row * cellHeight + 100;

          const date = new Date(new Date().getFullYear(), row, col);

          let cellBackgroundColor = DEFAULT_CELL_BG

          if (optHighlightWeekends && date.getMonth() === row) {
            if (date.getDay() == 0 || date.getDay() == 6) {
              cellBackgroundColor = WEEKEND_CELL_BG
            }
          }
          
          if (optRainbowDays1) {
            const hue = date.getDay() * 30;
            cellBackgroundColor = `hsl(${hue}, 100%, 80%)`;            
          }

          if (optRainbowDays2) {
            const hue = (col / (30)) * 360;
        
            // Assuming saturation and lightness are constant to keep the example simple
            const saturation = 100; // 100% for vibrant colors
            const lightness = 50; // 50% is a balanced lightness for visibility
        
            // Construct the HSL color string
            cellBackgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
          }
          
          if (optRainbowDays3) {
            // Calculate Euclidean distance from the bottom right corner
            const distance = Math.sqrt(Math.pow(totalRows - 1 - row, 2) + Math.pow(totalColumns - 1 - col, 2));
            
            // Normalize distance
            const normalizedDistance = distance / maxDistance;
            
            // Adjust hue based on distance (you can experiment with this part)
            const hue = normalizedDistance * 360;
            
            // Adjust lightness from 50% at the nearest point to 10% at the farthest to create a radial effect
            // You can adjust the range of lightness based on your desired effect
            //const lightness = 50 - (normalizedDistance * 40); // Ranges from 10% to 50%
            
            // Modify lightness adjustment to ensure colors remain light across the gradient
            // Consider keeping lightness above a minimum threshold that avoids the colors becoming too dark
            const lightnessMin = 80; // Minimum lightness value to avoid dark colors
            const lightnessMax = 95; // Maximum lightness value for vibrant colors
            const lightness = lightnessMin + (1 - normalizedDistance) * (lightnessMax - lightnessMin);


            // Saturation can remain constant or be adjusted similarly
            const saturation = 50; // Keeping saturation constant for vibrant colors
            
            cellBackgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
          }

          if (col === 0) {
            // draw.line(x, y + cellHeight, x + cellWidth, y + cellHeight).stroke(BORDER_COLOR);

            draw.text(function(add) {
              add.tspan(getMonthName(row)).newLine();
            }).move(x, y + 40).font({
              size: 20,
              family: 'Helvetica',
              weight: 'bold'
            }).rotate(-25);
          } else {
            draw.rect(cellWidth, cellHeight)
              .attr({ x: x, y: y, fill: cellBackgroundColor, stroke: BORDER_COLOR });
          }
                   
          if (date.getMonth() === row) {
            const dayName = getDayName(date);

            draw.text(function(add) {
              add.tspan(col).newLine();
            }).move(x + cellPadding, y).font({
              size: 12,
              family: 'Helvetica',
              weight: 'bold'
            });

            let showDay = optShowDayNames;
            if (date.getDay() == 0 || date.getDay() == 6) {
              showDay = optShowWeekendDayNames;
            }

            if (showDay) {
              draw.text(function(add) {
                add.tspan(dayName);
              }).move(x + cellPadding, y + 50).font({
                size: 12,
                family: 'Helvetica',
                weight: 'bold'
              });
            }
          }
        }
      }
    </script>

</body>
</html>